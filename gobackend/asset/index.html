<!doctype html>
<html>
  <head>
    <title>Webassembly</title>
  </head>
  <body>
    <h1>Webassembly</h1>
    <button id='up'>UP</button>
    <button id='down'>DOWN</button>
    <button id='left'>LEFT</button>
    <button id='right'>RIGHT</button>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script>
      var socket = io();

      socket.on('positions', function(positions){
        console.log(JSON.parse(atob(positions)));
      });

      socket.on('init', function(msg){
        console.log(atob(msg));
      });

      socket.on('ack', function(msg){
        console.log(msg);
      });

      $('button').click((e) => {
        console.log('Move: ' + $(e.target).attr('id'));
        socket.emit('move', $(e.target).attr('id'));
      });
    </script>
  </body>
</html>